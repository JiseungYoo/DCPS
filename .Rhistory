labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = -.5, yend = .8),
linetype = "solid", color = "lightgray")
a
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25) +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.25, yend = .5),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_2.png") %>%
ggsave(height = 3, width = 4, units = "in")
file.path(working_directory, "Output", "brief_fig_2.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
df <-
raw %>%
mutate(
dismissal_threat = ifelse(separation == 1, NA, dismissal_threat),
ineffective = case_when(rating == 1 ~ 1, rating > 1 ~ 0, .default = NA),
salary_increase_tp1 = case_when(
(schoolyear_fall >= 2012 & sch_pov_low == 1) ~ NA,
(yrsservcred_tp1 >= 3) ~ 1,
(yrsservcred_tp1 == 0) ~ 0,
.default = 0),
all = 1,
t_white = ifelse(t_white != 1 & t_black != 1, NA, t_white),
group_var = (t_white + 1) * (t_exp_veteran + 3)) %>%
group_by(group_var) %>%
summarise(across(
c(ineffective,
dismissal_threat,
salary_offer,
salary_increase_tp1), ~mean(.x, na.rm = TRUE))) %>%
mutate(t_white = case_match(group_var, c(3, 6) ~ 1, c(4, 8) ~ 0, .default = NA),
t_exp_vet = case_match(group_var, c(6, 8) ~ 1, c(3, 4) ~ 0, .default = NA)) %>%
filter(!is.na(group_var)) %>%
pivot_longer(cols = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
names_to = "outcome", values_to = "Percentage") %>%
mutate(group_var = case_match(group_var, 3 ~ "Black Novice", 4 ~ "White Novice",
6~"Black Veteran", 8 ~ "White Veteran"),
group_var = factor(group_var, levels =
c("Black Novice", "White Novice", "Black Veteran", "White Veteran")),
outcome = factor(outcome,
levels = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
labels = c("Immediate", "Threatened", "Offered", "Recieved")))
### Dismissal Outcomes ----
a <-
df %>%
filter(outcome %in% c("Immediate", "Threatened")) %>%
ggplot(aes(x = as.factor(group_var), y = Percentage, fill = factor(outcome))) +
geom_col(position = 'dodge') +
labs(x = "Teacher Characteristics", y = "Percentage", fill = "Dismissal Outcome:",
title = "Dismissal") +
scale_y_continuous(labels = percent, limits = c(0,.06), n.breaks = 4, minor_breaks = waiver()) +
scale_fill_manual(values = c("Immediate" = "#E7555A", "Threatened" = "#F78E29"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = 0, yend = .06),
linetype = "solid", color = "lightgray")
a
### Salary Outcomes ----
b <-
df %>%
filter(outcome %in% c("Offered", "Recieved")) %>%
ggplot(aes(x = as.factor(group_var), y = Percentage, fill = factor(outcome))) +
geom_col(position = 'dodge') +
labs(x = "Teacher Characteristics", y = "Percentage", fill = "Bonus Outcome:",
title = "Salary Increase") +
scale_fill_manual(values = c("Offered" = "#4A79A5", "Recieved" = "#5AA24A")) +
scale_y_continuous(labels = percent, limits = c(0,.15), n.breaks = 4, minor_breaks = waiver())
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = 0, yend = .15),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_1.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
df <-
file.path(working_directory, "Data", "Temporary", "Max_Brief_coef_data.xlsx") %>%
read_excel() %>%
mutate(error_min = beta - SE, error_max = beta + SE,
group_var = factor(group_var, levels =
c("Black Novice", "White Novice", "Black Veteran", "White Veteran")))
dodge <- position_dodge(width=0.9)
a <-
df %>%
filter(outcome %in% c("Well Planned Lesson", "Well Planned Lessons")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25) +
labs(x = "Teacher Characteristics", y = "beta", fill = "Incentive:",
title = "Test Score Changes (in Standard Deviations)") +
scale_y_continuous( limits = c(-.5,.8), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Well Planned Lesson" = "#F78E29", "Well Planned Lessons" = "#4A79A5"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = -.5, yend = .8),
linetype = "solid", color = "lightgray")
a
a <- a + geom_segment(aes(x = xval, xend = xval, y = -.5, yend = .75),
linetype = "solid", color = "lightgray")
a
a <-
df %>%
filter(outcome %in% c("Well Planned Lesson", "Well Planned Lessons")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25) +
labs(x = "Teacher Characteristics", y = "beta", fill = "Incentive:",
title = "Test Score Changes (in Standard Deviations)") +
scale_y_continuous( limits = c(-.5,.8), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Well Planned Lesson" = "#F78E29", "Well Planned Lessons" = "#4A79A5"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = -.5, yend = .75),
linetype = "solid", color = "lightgray")
a
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25) +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.25, yend = .5),
linetype = "solid", color = "lightgray")
b
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25) +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_2.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25, color = "grey") +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25, color = "darkgrey") +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_2.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
colors()
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25, color = "grey30") +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
a <-
df %>%
filter(outcome %in% c("Well Planned Lesson", "Well Planned Lessons")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25, color = "grey30") +
labs(x = "Teacher Characteristics", y = "beta", fill = "Incentive:",
title = "Test Score Changes (in Standard Deviations)") +
scale_y_continuous( limits = c(-.5,.8), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Well Planned Lesson" = "#F78E29", "Well Planned Lessons" = "#4A79A5"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = -.5, yend = .75),
linetype = "solid", color = "lightgray")
a
b <-
df %>%
filter(outcome %in% c("Leave Teaching", "Vol_leave")) %>%
ggplot(aes(x = as.factor(group_var), y = beta, fill = factor(outcome))) +
geom_col(position = dodge) +
geom_errorbar(aes(ymin = error_min, ymax = error_max),
position = dodge, width = 0.25, color = "grey30") +
labs(x = "Teacher Characteristics", y = "beta", fill = "Outcome:",
title = "Voluntary Leave (Percentage Point Change)") +
scale_y_continuous( limits = c(-.15,.2), n.breaks = 5, minor_breaks = waiver()) +
scale_fill_manual(values = c("Leave Teaching" = "#E7555A", "Vol_leave" = "#5AA24A"),
labels = c("Dismissal Threat", "Salary Bonus Offer"))
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = -.15, yend = .2),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_2.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
#
# Purpose of script:
#
# Author: Max Anthenelli
#
# Date Created: 2024-02-17
#  This code is free for anyone to use
# Email: anthenem@gmail.com
#
## set working directory ----
working_directory <- file.path("C:", "Users", "Max", "Documents", "GitHub",
"DCPS")
box_directory <- file.path(working_directory, "..", "..", "..",
"Box", "DCPS-SERP Data Internal 2019")
setwd(working_directory)
getwd()
#getwd()
## choose required packages ----
c("tidyverse", "magrittr", "rlang", "glue",
"haven", "labelled", "writexl",
"gt", "gtsummary", "webshot2", 'readxl',
"scales", "grid", "ggtext", "patchwork"
)  |>
purrr::walk(~require(.x, character.only = TRUE))
## Load Data ----
excel_file <- file.path( box_directory, "Data", "Raw",
"Student Data through SY22-23 Updated.xlsx")
courses_student.school.year <-
map(map_vec(c(19:22), ~glue("Courses SY{.x}-{.x+1}")),
~excel_file %>% read_excel(sheet = .x)) %>%
list_rbind() %>%
rename(year = courses_sy_start) %>%
mutate(Grade = ifelse(str_trim(Grade) == "K", "0", Grade) %>% parse_double())
#
# Purpose of script:
#
# Author: Max Anthenelli
#
# Date Created: 2024-02-12
#  This code is free for anyone to use
# Email: anthenem@gmail.com
#
## set working directory ----
working_directory <- file.path("C:", "Users", "Max", "Box",
"DCPS-SERP Data Internal 2019")
setwd(working_directory)
## choose required packages ----
c("tidyverse", "magrittr", "rlang", "glue",
"haven", "labelled", "readxl",
"gt", "gtsummary", "webshot2",
"scales", "grid", "ggtext", "patchwork", "ggthemes"
) |>
purrr::walk(~require(.x, character.only = TRUE))
theme_set(theme_fivethirtyeight() +
theme(
text = element_text(size = 10, face = "plain"),
rect = element_rect(fill = "white"),
plot.title = element_text(size = 11, face = "plain"),
plot.margin = margin(t = 0, b = 1),
axis.title.x = element_text(),
panel.grid.major.x = element_blank(),
panel.grid.minor.y = element_line(color = "lightgray", linetype = "dashed"),
legend.position = 'bottom',
legend.margin = margin(t = -5, b = -2)
))
### Wrangle Data ----
raw <-
file.path(working_directory, "Data", "Temporary",
"teacher_impact_analysisfile.dta") %>%
read_dta()
df <-
raw %>%
mutate(
dismissal_threat = ifelse(separation == 1, NA, dismissal_threat),
ineffective = case_when(rating == 1 ~ 1, rating > 1 ~ 0, .default = NA),
salary_increase_tp1 = case_when(
(schoolyear_fall >= 2012 & sch_pov_low == 1) ~ NA,
(yrsservcred_tp1 >= 3) ~ 1,
(yrsservcred_tp1 == 0) ~ 0,
.default = 0),
all = 1,
t_white = ifelse(t_white != 1 & t_black != 1, NA, t_white),
group_var = (t_white + 1) * (t_exp_veteran + 3)) %>%
group_by(group_var) %>%
summarise(across(
c(ineffective,
dismissal_threat,
salary_offer,
salary_increase_tp1), ~mean(.x, na.rm = TRUE))) %>%
mutate(t_white = case_match(group_var, c(3, 6) ~ 1, c(4, 8) ~ 0, .default = NA),
t_exp_vet = case_match(group_var, c(6, 8) ~ 1, c(3, 4) ~ 0, .default = NA)) %>%
filter(!is.na(group_var)) %>%
pivot_longer(cols = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
names_to = "outcome", values_to = "Percentage") %>%
mutate(group_var = case_match(group_var, 3 ~ "Black Novice", 4 ~ "White Novice",
6~"Black Veteran", 8 ~ "White Veteran"),
group_var = factor(group_var, levels =
c("Black Novice", "White Novice", "Black Veteran", "White Veteran")),
outcome = factor(outcome,
levels = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
labels = c("Immediate", "Threatened", "Offered", "Recieved")))
### Dismissal Outcomes ----
a <-
df %>%
filter(outcome %in% c("Immediate", "Threatened")) %>%
ggplot(aes(x = as.factor(group_var), y = Percentage, fill = factor(outcome))) +
geom_col(position = 'dodge') +
labs(x = "Teacher Characteristics", y = "Percentage", fill = "Dismissal Outcome:",
title = "Dismissal") +
scale_y_continuous(labels = percent, limits = c(0,.06), n.breaks = 4, minor_breaks = waiver()) +
scale_fill_manual(values = c("Immediate" = "#E7555A", "Threatened" = "#F78E29"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = 0, yend = .06),
linetype = "solid", color = "lightgray")
a
### Salary Outcomes ----
b <-
df %>%
filter(outcome %in% c("Offered", "Recieved")) %>%
ggplot(aes(x = as.factor(group_var), y = Percentage, fill = factor(outcome))) +
geom_col(position = 'dodge') +
labs(x = "Teacher Characteristics", y = "Percentage", fill = "Bonus Outcome:",
title = "Salary Increase") +
scale_fill_manual(values = c("Offered" = "#4A79A5", "Recieved" = "#5AA24A")) +
scale_y_continuous(labels = percent, limits = c(0,.15), n.breaks = 4, minor_breaks = waiver())
xval <- ggplot_build(b)$layout$panel_params[[1]]$x.range[1]
b <- b + geom_segment(aes(x = xval, xend = xval, y = 0, yend = .15),
linetype = "solid", color = "lightgray")
b
patch <-  a + b
patch + plot_layout( design =
'
a
#
b',  heights = c(1, .1, 1) #guides = 'collect',
) & theme(legend.position = 'bottom')
file.path(working_directory, "Output", "brief_fig_1.png") %>%
ggsave(height = 4.5, width = 4, units = "in")
#
# Purpose of script:
#
# Author: Max Anthenelli
#
# Date Created: 2024-02-12
#  This code is free for anyone to use
# Email: anthenem@gmail.com
#
## set working directory ----
working_directory <- file.path("C:", "Users", "Max", "Box",
"DCPS-SERP Data Internal 2019")
setwd(working_directory)
## choose required packages ----
c("tidyverse", "magrittr", "rlang", "glue",
"haven", "labelled", "readxl",
"gt", "gtsummary", "webshot2",
"scales", "grid", "ggtext", "patchwork", "ggthemes"
) |>
purrr::walk(~require(.x, character.only = TRUE))
theme_set(theme_fivethirtyeight() +
theme(
text = element_text(size = 10, face = "plain"),
rect = element_rect(fill = "white"),
plot.title = element_text(size = 11, face = "plain"),
plot.margin = margin(t = 0, b = 1),
axis.title.x = element_text(),
panel.grid.major.x = element_blank(),
panel.grid.minor.y = element_line(color = "lightgray", linetype = "dashed"),
legend.position = 'bottom',
legend.margin = margin(t = -5, b = -2)
))
### Wrangle Data ----
raw <-
file.path(working_directory, "Data", "Temporary",
"teacher_impact_analysisfile.dta") %>%
read_dta()
df <-
raw %>%
mutate(
dismissal_threat = ifelse(separation == 1, NA, dismissal_threat),
ineffective = case_when(rating == 1 ~ 1, rating > 1 ~ 0, .default = NA),
salary_increase_tp1 = case_when(
(schoolyear_fall >= 2012 & sch_pov_low == 1) ~ NA,
(yrsservcred_tp1 >= 3) ~ 1,
(yrsservcred_tp1 == 0) ~ 0,
.default = 0),
all = 1,
t_white = ifelse(t_white != 1 & t_black != 1, NA, t_white),
group_var = (t_white + 1) * (t_exp_veteran + 3)) %>%
group_by(group_var) %>%
summarise(across(
c(ineffective,
dismissal_threat,
salary_offer,
salary_increase_tp1), ~mean(.x, na.rm = TRUE))) %>%
mutate(t_white = case_match(group_var, c(3, 6) ~ 1, c(4, 8) ~ 0, .default = NA),
t_exp_vet = case_match(group_var, c(6, 8) ~ 1, c(3, 4) ~ 0, .default = NA)) %>%
filter(!is.na(group_var)) %>%
pivot_longer(cols = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
names_to = "outcome", values_to = "Percentage") %>%
mutate(group_var = case_match(group_var, 3 ~ "Black Novice", 4 ~ "White Novice",
6~"Black Veteran", 8 ~ "White Veteran"),
group_var = factor(group_var, levels =
c("Black Novice", "White Novice", "Black Veteran", "White Veteran")),
outcome = factor(outcome,
levels = c("ineffective", "dismissal_threat", "salary_offer", "salary_increase_tp1"),
labels = c("Immediate", "Threatened", "Offered", "Recieved")))
### Dismissal Outcomes ----
a <-
df %>%
filter(outcome %in% c("Immediate", "Threatened")) %>%
ggplot(aes(x = as.factor(group_var), y = Percentage, fill = factor(outcome))) +
geom_col(position = 'dodge') +
labs(x = "Teacher Characteristics", y = "Percentage", fill = "Dismissal Outcome:",
title = "Dismissal") +
scale_y_continuous(labels = percent, limits = c(0,.06), n.breaks = 4, minor_breaks = waiver()) +
scale_fill_manual(values = c("Immediate" = "#E7555A", "Threatened" = "#F78E29"))
xval <- ggplot_build(a)$layout$panel_params[[1]]$x.range[1]
a <- a + geom_segment(aes(x = xval, xend = xval, y = 0, yend = .06),
linetype = "solid", color = "lightgray")
a
